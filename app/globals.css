@layer theme, base, components, utilities;

@import 'tailwindcss/theme' layer(theme);
@import 'tailwindcss/preflight' layer(base);
@import 'tailwindcss/utilities' layer(utilities);

@theme {
  /* Colors */
  --color-*: initial;

  --fg: #f5f4ff;
  --bg: #00001e;

  --color-accent-pink: #ec4899;
  --color-accent-blue: #1712c8;
  --color-accent-sky: #22d3ee;

  --color-blue-50: #e8e7ff;
  --color-blue-100: #a6a4ed;
  --color-blue-200: #8581ff;
  --color-blue-300: #736eff;
  --color-blue-400: #5854d7;
  --color-blue-500: #1a14df;
  --color-blue-600: #1712c8;
  --color-blue-700: #0f17a0;
  --color-blue-800: #110a72;
  --color-blue-900: #0a0053;
  --color-blue-950: #050030;

  --color-slate-50: #f8fafc;
  --color-slate-100: #f1f5f9;
  --color-slate-200: #e0e7ff;
  --color-slate-300: #cbd5e1;
  --color-slate-400: #94a3b8;
  --color-slate-500: #64748b;
  --color-slate-600: #475569;
  --color-slate-700: #334155;
  --color-slate-800: #1e293b;
  --color-slate-900: #0f172a;
  --color-slate-950: #020617;

  --color-background: var(--fg);
  --color-foreground: var(--bg);
  --color-card: var(--fg);
  --color-card-foreground: var(--bg);
  --color-popover: var(--fg);
  --color-popover-foreground: var(--bg);
  --color-primary: var(--color-blue-600);
  --color-primary-foreground: var(--fg);
  --color-secondary: var(--color-slate-100);
  --color-secondary-foreground: var(--color-blue-600);
  --color-muted: var(--color-slate-200);
  --color-muted-foreground: #64748b;
  --color-accent: var(--bg);
  --color-accent-foreground: var(--color-accent-blue);
  --color-destructive: #ef4444;
  --color-destructive-foreground: var(--fg);
  --color-border: var(--color-slate-300);
  --color-input: var(--color-slate-300);
  --color-ring: var(--bg);

  /* Highlighter */
  --color-hl-idt: #736eff;
  --color-hl-key: #de508b;
  --color-hl-str: #07b998;
  --color-hl-cls: #7170ff;
  --color-hl-pty: #2cadee;
  --color-hl-ent: #de508b;
  --color-hl-jsx: #8c0ec5;
  --color-hl-sgn: #94a3b8;
  --color-hl-cmt: #c9c9c9;

  /* Animations */
  --animate-*: initial;
  --animate-rotate: rotate 2.5s linear infinite;

  /* Widths */
  --width-mdx: 65ch;

  @keyframes rotate {
    from {
      tranform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }
}

.dark,
:where([class*='dark']) {
  @theme {
    --color-background: var(--bg);
    --color-foreground: var(--fg);
    --color-card: var(--bg);
    --color-card-foreground: var(--fg);
    --color-popover: var(--bg);
    --color-popover-foreground: var(--fg);
    --color-primary: var(--fg);
    --color-primary-foreground: var(--color-blue-600);
    --color-secondary: #1e293b;
    --color-secondary-foreground: var(--fg);
    --color-muted: #15152e;
    --color-muted-foreground: #94a3b8;
    --color-accent: var(--fg);
    --color-accent-foreground: var(--color-accent-sky);
    --color-destructive: #7f1d1d;
    --color-destructive-foreground: var(--fg);
    --color-border: #1e293b;
    --color-input: #1e293b;
    --color-ring: var(--color-slate-300);
    /* Highlighter Dark Theme */
    --color-hl-idt: var(--color-accent-sky);
    --color-hl-key: var(--color-accent-pink);
    --color-hl-str: var(--color-blue-50);
    --color-hl-cls: var(--color-accent-sky);
    --color-hl-pty: var(--color-accent-pink);
    --color-hl-ent: var(--color-accent-sky);
    --color-hl-jsx: var(--color-blue-50);
    --color-hl-sgn: var(--color-slate-400);
    --color-hl-cmt: var(--color-slate-600);
  }
}

@base {
  /* Typography */
  h1 {
    @apply scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-4xl;
  }

  h2 {
    @apply mt-10 scroll-m-20 pb-2 text-3xl font-semibold tracking-tight first:mt-0;
  }

  h3 {
    @apply mt-8 scroll-m-20 text-2xl font-semibold tracking-tight;
  }

  h4 {
    @apply mt-6 scroll-m-20 text-xl font-semibold tracking-tight;
  }

  a {
    @apply font-medium text-foreground no-underline;
  }

  p {
    @apply text-base text-muted-foreground leading-7 mt-6;
  }

  p:where([class*='lead']) {
    @apply text-xl;
  }

  p:where([class*='muted']) {
    @apply text-sm text-muted;
  }

  code:where(:not([data-hl-block])) {
    @apply my-6 flex flex-row justify-start items-center rounded bg-muted px-2 py-1.5 max-w-mdx font-mono text-sm font-medium text-foreground border border-border border-solid whitespace-nowrap overflow-x-scroll;
  }

  small {
    @apply text-sm font-medium leading-none;
  }

  div:where([class='large']) {
    @apply text-lg font-semibold;
  }

  table {
    @apply my-6 w-full overflow-y-auto indent-0 border-border border-collapse;
  }

  tr {
    @apply m-0 border-t p-0 even:bg-muted;
  }

  td {
    @apply border px-4 py-2 text-left;
  }

  th {
    @apply border px-4 py-2 text-left font-bold;
  }

  blockquote {
    @apply my-6 border-l-6 pl-6 rounded italic py-3 bg-muted text-accent-foreground border border-l-accent-foreground;
  }

  ol {
    @apply list-none;
  }

  ul {
    @apply list-none;
  }

  /* Highlighter */
  hl-ln:before {
    counter-increment: hl-ln-num 1;
    content: counter(hl-ln-num);
    text-align: left;
    color: var(--color-hl-cmt);
    width: 1.25rem;
    margin: 0;
    padding: 0;
    margin-right: 1.25rem;
    display: inline-block;
  }

  hl-ln-num {
    color: var(--color-hl-cmt);
  }

  code:where(:not([class*='inline-code'])) {
    counter-reset: hl-ln-num;
  }

  hl-cls {
    color: var(--color-hl-cls);
  }

  hl-idt {
    color: var(--color-hl-idt);
  }

  hl-sgn {
    color: var(--color-hl-sgn);
  }

  hl-str {
    color: var(--color-hl-str);
  }

  hl-key {
    color: var(--color-hl-key);
  }

  hl-cmt {
    color: var(--color-hl-cmt);
  }

  hl-jsx {
    color: var(--color-hl-jsx);
  }

  hl-pty {
    color: var(--color-hl-pty);
  }

  hl-ent {
    color: var(--color-hl-ent);
  }

  [data-anchor] {
    visibility: hidden;
    cursor: pointer;
    max-width: var(--width-mdx);
    text-decoration-line: none;
    color: var(--color-foreground);
  }

  [data-anchor]:hover {
    visibility: visible;
  }

  [data-anchor]:hover:after {
    color: var(--color-muted-foreground);
    content: '#';
  }

  .loader-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100vw;
    height: 100vh;
    background-color: var(--color-background);
    border-radius: var(--radius-md);
    text-align: center;
    font-family: sans-serif;
    font-size: 15px;
    color: var(--color-accent-foreground);
    letter-spacing: 4px;
    text-transform: uppercase;
  }

  .loader-ring:before {
    content: '';
    position: absolute;
    top: -10px;
    left: 0px;
    width: 100%;
    height: 100%;
    border: 5px solid var(--color-accent-foreground);
    border-radius: 50%;
    animation: rotate 3s linear infinite;
  }

  .loader-ring > span {
    display: block;
    position: absolute;
    top: 50%;
    left: 50%;
    width: 50%;
    height: 4px;
    background: transparent;
    transform-origin: left;
    animation: animate 3s linear infinite;
  }
}
